(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),a=e.i(22016),r=e.i(75254);let s=(0,r.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var l=e.i(58041),n=e.i(38982),i=e.i(52008),o=e.i(55436),c=e.i(53475),d=e.i(57212),h=e.i(75118),x=e.i(42696),p=e.i(70869),m=e.i(21218);let u=(0,r.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var g=e.i(39312);function v({status:e,latestMetric:a}){if(!e)return(0,t.jsx)("div",{className:"rounded-xl bg-gray-900 p-4 border border-gray-800",children:(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Waiting for training to start..."})});let r=e.total_epochs?e.epoch/e.total_epochs*100:0,s=e.total_steps?e.step/e.total_steps*100:0,l=Number(e.config?.accumulate_grad_batches)||1;return(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 p-4 border border-gray-800",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Activity,{className:"w-4 h-4 text-blue-400"}),(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200",children:"Training Progress"})]}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${e.is_training?"bg-green-900/50 text-green-400":"bg-gray-800 text-gray-500"}`,children:e.is_training?"Training":"Idle"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Epoch"}),(0,t.jsxs)("p",{className:"text-lg font-mono text-gray-200",children:[e.epoch,(0,t.jsxs)("span",{className:"text-gray-600",children:["/",e.total_epochs]})]}),(0,t.jsx)("div",{className:"mt-1 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all",style:{width:`${r}%`}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Step"}),(0,t.jsxs)("p",{className:"text-lg font-mono text-gray-200",children:[e.step.toLocaleString(),(0,t.jsxs)("span",{className:"text-gray-600",children:["/",e.total_steps.toLocaleString()]})]}),l>1&&(0,t.jsxs)("p",{className:"text-[10px] text-gray-600 font-mono",children:["Batch ",(e.step*l).toLocaleString(),"/",(e.total_steps*l).toLocaleString()," ","(",l,"x accum)"]}),(0,t.jsx)("div",{className:"mt-1 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${s}%`}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(g.Zap,{className:"w-3 h-3 text-yellow-400"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Learning Rate"})]}),(0,t.jsx)("p",{className:"text-lg font-mono text-gray-200 mt-1",children:a?a.lr.toExponential(2):"—"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u,{className:"w-3 h-3 text-orange-400"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Total Loss"})]}),(0,t.jsx)("p",{className:"text-lg font-mono text-gray-200 mt-1",children:a?a.loss_total.toFixed(4):"—"})]})]})]})}let y=(0,r.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),f=(0,r.default)("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),b=(0,r.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);function j({value:e,label:a,unit:r,icon:s,colorFn:l}){let n=2*Math.PI*36,i=n-e/100*n,o=l(e);return(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"relative w-24 h-24",children:[(0,t.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 80 80",children:[(0,t.jsx)("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"#1f2937",strokeWidth:"6"}),(0,t.jsx)("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:n,strokeDashoffset:i,className:"transition-all duration-500"})]}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s,(0,t.jsxs)("span",{className:"text-sm font-mono font-bold text-gray-200 mt-0.5",children:[e.toFixed(0),r]})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a})]})}function k({used:e,total:a,label:r}){let s=a>0?e/a*100:0;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,t.jsx)("span",{className:"text-gray-500",children:r}),(0,t.jsxs)("span",{className:"text-gray-400 font-mono",children:[e.toFixed(1)," / ",a.toFixed(1)," GB"]})]}),(0,t.jsx)("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full rounded-full transition-all duration-500 ${s>90?"bg-red-500":s>70?"bg-yellow-500":"bg-emerald-500"}`,style:{width:`${s}%`}})})]})}let N=e=>e>95?"#ef4444":e>80?"#eab308":"#10b981";function w({data:e}){return e?(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 p-4 border border-gray-800",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200",children:"System"}),e.gpu_name&&(0,t.jsx)("span",{className:"text-xs text-gray-600 font-mono truncate max-w-[140px]",children:e.gpu_name})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,t.jsx)(j,{value:e.gpu_util,label:"GPU",unit:"%",icon:(0,t.jsx)(b,{className:"w-3.5 h-3.5 text-gray-500"}),colorFn:N}),(0,t.jsx)(j,{value:e.cpu_util,label:"CPU",unit:"%",icon:(0,t.jsx)(y,{className:"w-3.5 h-3.5 text-gray-500"}),colorFn:N})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(k,{used:e.gpu_mem_used,total:e.gpu_mem_total,label:"GPU Memory"}),(0,t.jsx)(k,{used:e.ram_used,total:e.ram_total,label:"RAM"})]}),e.gpu_temp>0&&(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[(0,t.jsx)(f,{className:"w-3.5 h-3.5 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-500",children:"GPU Temp:"}),(0,t.jsxs)("span",{className:`font-mono font-bold ${e.gpu_temp>85?"text-red-400":e.gpu_temp>70?"text-yellow-400":"text-emerald-400"}`,children:[e.gpu_temp,"°C"]})]})]}):(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 p-4 border border-gray-800",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200 mb-3",children:"System"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No data"})]})}var S=e.i(71645),M=e.i(25949),_=e.i(33369),T=["axis"],E=(0,S.forwardRef)((e,t)=>S.createElement(_.CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:T,tooltipPayloadSearcher:M.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),D=e.i(55706),C=e.i(85183),X=e.i(93230),O=e.i(72526),P=e.i(34239),L=e.i(59559),A=e.i(31195),F=S,z=e.i(7670);e.i(25212);var I=e.i(82984),I=I,$=e.i(66814),B=e.i(97865),W=e.i(9516),K=e.i(79812),R=e.i(94395);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach(function(t){var r,s,l;r=e,s=t,l=a[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in r?Object.defineProperty(r,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[s]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var G=["Webkit","Moz","O","ms"],U=e.i(98596),V=(0,S.createContext)(()=>{}),Y=e.i(27241),Q=e.i(88701),Z=e.i(34393),J=e.i(75337),ee=e.i(16842),et=e.i(6613),ea=e.i(51883),er=e.i(57999);function es(){return(es=Object.assign.bind()).apply(null,arguments)}function el(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function en(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?el(Object(a),!0).forEach(function(t){ei(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):el(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ei(e,t,a){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function eo(e){var{x:t,y:a,width:r,height:s,stroke:l}=e,n=Math.floor(a+s/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:t,y:a,width:r,height:s,fill:l,stroke:"none"}),F.createElement("line",{x1:t+1,y1:n,x2:t+r-1,y2:n,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:t+1,y1:n+2,x2:t+r-1,y2:n+2,fill:"none",stroke:"#fff"}))}function ec(e){var{travellerProps:t,travellerType:a}=e;return F.isValidElement(a)?F.cloneElement(a,t):"function"==typeof a?a(t):F.createElement(eo,t)}function ed(e){if((0,R.isNotNil)(e)&&"object"==typeof e&&"name"in e&&"string"==typeof e.name)return e.name}function eh(e){var t,a,{otherProps:r,travellerX:s,id:l,onMouseEnter:n,onMouseLeave:i,onMouseDown:o,onTouchStart:c,onTravellerMoveKeyboard:d,onFocus:h,onBlur:x}=e,{y:p,x:m,travellerWidth:u,height:g,traveller:v,ariaLabel:y,data:f,startIndex:b,endIndex:j}=r,k=Math.max(s,m),N=en(en({},(0,er.svgPropertiesNoEvents)(r)),{},{x:k,y:p,width:u,height:g}),w=y||(t=ed(f[b]),a=ed(f[j]),"Min value: ".concat(t,", Max value: ").concat(a));return F.createElement(B.Layer,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:n,onMouseLeave:i,onMouseDown:o,onTouchStart:c,onKeyDown:e=>{["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),d("ArrowRight"===e.key?1:-1,l))},onFocus:h,onBlur:x,style:{cursor:"col-resize"}},F.createElement(ec,{travellerType:v,travellerProps:N}))}function ex(e){var{index:t,data:a,tickFormatter:r,dataKey:s}=e,l=(0,K.getValueByDataKey)(a[t],s,t);return"function"==typeof r?r(l,t):l}function ep(e,t){for(var a=e.length,r=0,s=a-1;s-r>1;){var l=Math.floor((r+s)/2),n=e[l];null!=n&&n>t?s=l:r=l}var i=e[s];return null!=i&&t>=i?s:r}function em(e){var{startX:t,endX:a,scaleValues:r,gap:s,data:l}=e,n=l.length-1,i=Math.min(t,a),o=Math.max(t,a),c=ep(r,i),d=ep(r,o);return{startIndex:c-c%s,endIndex:d===n?n:d-d%s}}function eu(e){var{x:t,y:a,width:r,height:s,fill:l,stroke:n}=e;return F.createElement("rect",{stroke:n,fill:l,x:t,y:a,width:r,height:s})}function eg(e){var{startIndex:t,endIndex:a,y:r,height:s,travellerWidth:l,stroke:n,tickFormatter:i,dataKey:o,data:c,startX:d,endX:h}=e,x={pointerEvents:"none",fill:n};return F.createElement(B.Layer,{className:"recharts-brush-texts"},F.createElement(W.Text,es({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-5,y:r+s/2},x),ex({index:t,tickFormatter:i,dataKey:o,data:c})),F.createElement(W.Text,es({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+5,y:r+s/2},x),ex({index:a,tickFormatter:i,dataKey:o,data:c})))}function ev(e){var{y:t,height:a,stroke:r,travellerWidth:s,startX:l,endX:n,onMouseEnter:i,onMouseLeave:o,onMouseDown:c,onTouchStart:d}=e,h=Math.min(l,n)+s,x=Math.max(Math.abs(n-l)-s,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:i,onMouseLeave:o,onMouseDown:c,onTouchStart:d,style:{cursor:"move"},stroke:"none",fill:r,fillOpacity:.2,x:h,y:t,width:x,height:a})}function ey(e){var{x:t,y:a,width:r,height:s,data:l,children:n,padding:i}=e;if(1!==F.Children.count(n))return null;var o=F.Children.only(n);return o?F.cloneElement(o,{x:t,y:a,width:r,height:s,margin:i,compact:!0,data:l}):null}var ef=e=>e.changedTouches&&!!e.changedTouches.length;class eb extends F.PureComponent{constructor(e){super(e),ei(this,"handleDrag",e=>{this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.state.isTravellerMoving?this.handleTravellerMove(e):this.state.isSlideMoving&&this.handleSlideDrag(e)}),ei(this,"handleTouchMove",e=>{var t,a=null==(t=e.changedTouches)?void 0:t[0];null!=a&&this.handleDrag(a)}),ei(this,"handleDragEnd",()=>{this.setState({isTravellerMoving:!1,isSlideMoving:!1},()=>{var{endIndex:e,onDragEnd:t,startIndex:a}=this.props;null==t||t({endIndex:e,startIndex:a})}),this.detachDragEndListener()}),ei(this,"handleLeaveWrapper",()=>{(this.state.isTravellerMoving||this.state.isSlideMoving)&&(this.leaveTimer=window.setTimeout(this.handleDragEnd,this.props.leaveTimeOut))}),ei(this,"handleEnterSlideOrTraveller",()=>{this.setState({isTextActive:!0})}),ei(this,"handleLeaveSlideOrTraveller",()=>{this.setState({isTextActive:!1})}),ei(this,"handleSlideDragStart",e=>{var t=ef(e)?e.changedTouches[0]:e;null!=t&&(this.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),this.attachDragEndListener())}),ei(this,"handleTravellerMoveKeyboard",(e,t)=>{var{data:a,gap:r,startIndex:s,endIndex:l}=this.props,{scaleValues:n,startX:i,endX:o}=this.state;if(null==n)return;var c=-1;if("startX"===t?c=s:"endX"===t&&(c=l),!(c<0)&&!(c>=a.length)){var d=c+e;if(-1!==d&&!(d>=n.length)){var h=n[d];null==h||"startX"===t&&h>=o||"endX"===t&&h<=i||this.setState({[t]:h},()=>{this.props.onChange(em({startX:this.state.startX,endX:this.state.endX,data:a,gap:r,scaleValues:n}))})}}}),this.travellerDragStartHandlers={startX:this.handleTravellerDragStart.bind(this,"startX"),endX:this.handleTravellerDragStart.bind(this,"endX")},this.state={brushMoveStartX:0,movingTravellerId:void 0,endX:0,startX:0,slideMoveStartX:0}}static getDerivedStateFromProps(e,t){var{data:a,width:r,x:s,travellerWidth:l,startIndex:n,endIndex:i,startIndexControlledFromProps:o,endIndexControlledFromProps:c}=e;if(a!==t.prevData)return en({prevData:a,prevTravellerWidth:l,prevX:s,prevWidth:r},a&&a.length?(e=>{var{data:t,startIndex:a,endIndex:r,x:s,width:l,travellerWidth:n}=e;if(!t||!t.length)return{};var i=t.length,o=(0,I.point)().domain((0,$.default)(0,i)).range([s,s+l-n]),c=o.domain().map(e=>o(e)).filter(R.isNotNil);return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:o(a),endX:o(r),scale:o,scaleValues:c}})({data:a,width:r,x:s,travellerWidth:l,startIndex:n,endIndex:i}):{scale:void 0,scaleValues:void 0});var d=t.scale;if(d&&(r!==t.prevWidth||s!==t.prevX||l!==t.prevTravellerWidth)){d.range([s,s+r-l]);var h=d.domain().map(e=>d(e)).filter(e=>null!=e);return{prevData:a,prevTravellerWidth:l,prevX:s,prevWidth:r,startX:d(e.startIndex),endX:d(e.endIndex),scaleValues:h}}if(t.scale&&!t.isSlideMoving&&!t.isTravellerMoving&&!t.isTravellerFocused&&!t.isTextActive){if(null!=o&&t.prevStartIndexControlledFromProps!==o)return{startX:t.scale(o),prevStartIndexControlledFromProps:o};if(null!=c&&t.prevEndIndexControlledFromProps!==c)return{endX:t.scale(c),prevEndIndexControlledFromProps:c}}return null}componentWillUnmount(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}attachDragEndListener(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}detachDragEndListener(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}handleSlideDrag(e){var{slideMoveStartX:t,startX:a,endX:r,scaleValues:s}=this.state;if(null!=s){var{x:l,width:n,travellerWidth:i,startIndex:o,endIndex:c,onChange:d,data:h,gap:x}=this.props,p=e.pageX-t;p>0?p=Math.min(p,l+n-i-r,l+n-i-a):p<0&&(p=Math.max(p,l-a,l-r));var m=em({startX:a+p,endX:r+p,data:h,gap:x,scaleValues:s});(m.startIndex!==o||m.endIndex!==c)&&d&&d(m),this.setState({startX:a+p,endX:r+p,slideMoveStartX:e.pageX})}}handleTravellerDragStart(e,t){var a=ef(t)?t.changedTouches[0]:t;null!=a&&(this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:a.pageX}),this.attachDragEndListener())}handleTravellerMove(e){var{brushMoveStartX:t,movingTravellerId:a,endX:r,startX:s,scaleValues:l}=this.state;if(null!=a&&null!=l){var n=this.state[a],{x:i,width:o,travellerWidth:c,onChange:d,gap:h,data:x}=this.props,p={startX:this.state.startX,endX:this.state.endX,data:x,gap:h,scaleValues:l},m=e.pageX-t;m>0?m=Math.min(m,i+o-c-n):m<0&&(m=Math.max(m,i-n)),p[a]=n+m;var u=em(p),{startIndex:g,endIndex:v}=u;this.setState({[a]:n+m,brushMoveStartX:e.pageX},()=>{var e;d&&(e=x.length-1,"startX"===a&&(r>s?g%h==0:v%h==0)||r<s&&v===e||"endX"===a&&(r>s?v%h==0:g%h==0)||r>s&&v===e||0)&&d(u)})}}render(){var{data:e,className:t,children:a,x:r,y:s,dy:l,width:n,height:i,alwaysShowText:o,fill:c,stroke:d,startIndex:h,endIndex:x,travellerWidth:p,tickFormatter:m,dataKey:u,padding:g}=this.props,{startX:v,endX:y,isTextActive:f,isSlideMoving:b,isTravellerMoving:j,isTravellerFocused:k}=this.state;if(!e||!e.length||!(0,R.isNumber)(r)||!(0,R.isNumber)(s)||!(0,R.isNumber)(n)||!(0,R.isNumber)(i)||n<=0||i<=0)return null;var N=(0,z.clsx)("recharts-brush",t),w=((e,t)=>{if(e){var a=e.replace(/(\w)/,e=>e.toUpperCase()),r=G.reduce((e,r)=>q(q({},e),{},{[r+a]:t}),{});return r[e]=t,r}})("userSelect","none"),S=s+(null!=l?l:0);return F.createElement(B.Layer,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},F.createElement(eu,{x:r,y:S,width:n,height:i,fill:c,stroke:d}),F.createElement(J.PanoramaContextProvider,null,F.createElement(ey,{x:r,y:S,width:n,height:i,data:e,padding:g},a)),F.createElement(ev,{y:S,height:i,stroke:d,travellerWidth:p,startX:v,endX:y,onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart}),F.createElement(eh,{travellerX:v,id:"startX",otherProps:en(en({},this.props),{},{y:S}),onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers.startX,onTouchStart:this.travellerDragStartHandlers.startX,onTravellerMoveKeyboard:this.handleTravellerMoveKeyboard,onFocus:()=>{this.setState({isTravellerFocused:!0})},onBlur:()=>{this.setState({isTravellerFocused:!1})}}),F.createElement(eh,{travellerX:y,id:"endX",otherProps:en(en({},this.props),{},{y:S}),onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers.endX,onTouchStart:this.travellerDragStartHandlers.endX,onTravellerMoveKeyboard:this.handleTravellerMoveKeyboard,onFocus:()=>{this.setState({isTravellerFocused:!0})},onBlur:()=>{this.setState({isTravellerFocused:!1})}}),(f||b||j||k||o)&&F.createElement(eg,{startIndex:h,endIndex:x,y:S,height:i,travellerWidth:p,stroke:d,tickFormatter:m,dataKey:u,data:e,startX:v,endX:y}))}}function ej(e){var t=(0,Y.useAppDispatch)(),a=(0,U.useChartData)(),r=(0,U.useDataIndex)(),s=(0,F.useContext)(V),l=e.onChange,{startIndex:n,endIndex:i}=e;(0,F.useEffect)(()=>{t((0,Q.setDataStartEndIndexes)({startIndex:n,endIndex:i}))},[t,i,n]),(0,et.useBrushChartSynchronisation)();var o=(0,F.useCallback)(e=>{if(null!=r){var{startIndex:a,endIndex:n}=r;(e.startIndex!==a||e.endIndex!==n)&&(null==s||s(e),null==l||l(e),t((0,Q.setDataStartEndIndexes)(e)))}},[l,s,t,r]),c=(0,Y.useAppSelector)(ee.selectBrushDimensions);if(null==c||null==r||null==a||!a.length)return null;var{startIndex:d,endIndex:h}=r,{x,y:p,width:m}=c;return F.createElement(eb,es({},e,{data:a,x,y:p,width:m,startIndex:d,endIndex:h,onChange:o},{startIndexControlledFromProps:null!=n?n:void 0,endIndexControlledFromProps:null!=i?i:void 0}))}function ek(e){var t=(0,Y.useAppDispatch)();return(0,F.useEffect)(()=>(t((0,Z.setBrushSettings)(e)),()=>{t((0,Z.setBrushSettings)(null))}),[t,e]),null}var eN={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};function ew(e){var t=(0,ea.resolveDefaultProps)(e,eN);return F.createElement(F.Fragment,null,F.createElement(ek,{height:t.height,x:t.x,y:t.y,width:t.width,padding:t.padding}),F.createElement(ej,t))}ew.displayName="Brush";let eS=[{key:"total",color:"#3b82f6",label:"Total"},{key:"contrastive",color:"#8b5cf6",label:"Contrastive"},{key:"quantization",color:"#f59e0b",label:"Quantization"},{key:"balance",color:"#10b981",label:"Balance"},{key:"consistency",color:"#ec4899",label:"Consistency"},{key:"ortho",color:"#06b6d4",label:"Ortho"},{key:"lcs",color:"#f97316",label:"LCS"},{key:"distillation",color:"#a855f7",label:"Distill"},{key:"adapter_align",color:"#14b8a6",label:"Adapter"}];function eM(e){return e>=1e3?`${(e/1e3).toFixed(1)}k`:String(e)}function e_(e){return e<.01?e.toExponential(0):e.toFixed(2)}let eT={backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"8px",fontSize:"11px"};function eE({data:e,evalData:a}){let[r,s]=(0,S.useState)(()=>Object.fromEntries(eS.map(e=>[e.key,!0]))),[l,n]=(0,S.useState)(!1),i=e=>s(t=>({...t,[e]:!t[e]})),o=(0,S.useMemo)(()=>e.map(e=>({step:e.step,total:e.loss_total,contrastive:e.loss_contrastive,quantization:e.loss_quantization,balance:e.loss_balance,consistency:e.loss_consistency,ortho:e.loss_ortho,lcs:e.loss_lcs,distillation:e.loss_distillation,adapter_align:e.loss_adapter_align})),[e]),c=(0,S.useMemo)(()=>a?.length?a.filter(e=>null!=e.val_loss_total).map(e=>({step:e.step??e.epoch,total:e.val_loss_total,contrastive:e.val_loss_contrastive,quantization:e.val_loss_quantization,balance:e.val_loss_balance,consistency:e.val_loss_consistency,ortho:e.val_loss_ortho,lcs:e.val_loss_lcs,distillation:e.val_loss_distillation,adapter_align:e.val_loss_adapter_align})).sort((e,t)=>e.step-t.step):[],[a]);function d(e){if(l)return[.001,"auto"];if(0===e.length)return[0,"auto"];let t=eS.filter(e=>r[e.key]).map(e=>e.key);if(0===t.length)return[0,"auto"];let a=0;for(let r of e)for(let e of t){let t=r[e];null!=t&&"number"==typeof t&&t>a&&(a=t)}return[0,a>0?1.1*a:"auto"]}let h=(0,S.useMemo)(()=>d(o),[o,r,l]),x=(0,S.useMemo)(()=>d(c),[c,r,l]);return(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 p-4 border border-gray-800 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200",children:"Loss Curves"}),(0,t.jsxs)("div",{className:"flex gap-1.5 flex-wrap items-center",children:[(0,t.jsx)("button",{onClick:()=>n(e=>!e),className:`text-[10px] px-1.5 py-0.5 rounded border transition-all mr-1 ${l?"border-white text-white opacity-100":"border-gray-700 text-gray-500 opacity-60"}`,children:"Log"}),eS.map(e=>(0,t.jsx)("button",{onClick:()=>i(e.key),className:`text-[10px] px-1.5 py-0.5 rounded border transition-all ${r[e.key]?"border-current opacity-100":"border-gray-700 opacity-40"}`,style:{color:e.color},children:e.label},e.key))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-gray-500 mb-1",children:"Training"}),0===e.length?(0,t.jsx)("div",{className:"h-48 flex items-center justify-center text-gray-600 text-sm",children:"Waiting for training data..."}):(0,t.jsx)(A.ResponsiveContainer,{width:"100%",height:250,children:(0,t.jsxs)(E,{data:o,children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,t.jsx)(C.XAxis,{dataKey:"step",type:"number",domain:["dataMin","dataMax"],tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151",tickFormatter:eM}),(0,t.jsx)(X.YAxis,{scale:l?"log":"auto",domain:h,allowDataOverflow:!0,tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151",tickFormatter:e_}),(0,t.jsx)(P.Tooltip,{contentStyle:eT,labelStyle:{color:"#9ca3af"},labelFormatter:e=>`Step ${eM(e)}`}),(0,t.jsx)(L.Legend,{wrapperStyle:{fontSize:"11px"},onClick:e=>i(e.dataKey)}),eS.map(e=>r[e.key]?(0,t.jsx)(D.Line,{type:"monotone",dataKey:e.key,stroke:e.color,dot:!1,strokeWidth:"total"===e.key?2:1.2,name:e.label,isAnimationActive:!1},e.key):null),(0,t.jsx)(ew,{dataKey:"step",height:20,stroke:"#374151",fill:"#111827",travellerWidth:8})]})})]}),c.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-gray-500 mb-1",children:"Validation"}),(0,t.jsx)(A.ResponsiveContainer,{width:"100%",height:180,children:(0,t.jsxs)(E,{data:c,children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,t.jsx)(C.XAxis,{dataKey:"step",type:"number",domain:["dataMin","dataMax"],tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151",tickFormatter:eM}),(0,t.jsx)(X.YAxis,{scale:l?"log":"auto",domain:x,allowDataOverflow:!0,tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151",tickFormatter:e_}),(0,t.jsx)(P.Tooltip,{contentStyle:eT,labelStyle:{color:"#9ca3af"},labelFormatter:e=>`Step ${eM(e)}`}),eS.map(e=>r[e.key]?(0,t.jsx)(D.Line,{type:"monotone",dataKey:e.key,stroke:e.color,dot:{r:3,fill:e.color},strokeWidth:"total"===e.key?2:1.2,connectNulls:!0,name:e.label,isAnimationActive:!1},e.key):null)]})})]})]})}var eD=e.i(9694),eC=e.i(75225);let eX=["I2T","T2I"],eO={I2T:"#3b82f6",T2I:"#8b5cf6"},eP={I2T:"#60a5fa",T2I:"#a78bfa"};function eL({data:e}){let[a,r]=(0,S.useState)("map"),s=e.map(e=>({step:e.step??e.epoch,epoch:e.epoch,I2T:e.map_i2t,T2I:e.map_t2i,"Backbone I2T":e.backbone_map_i2t,"Backbone T2I":e.backbone_map_t2i})).sort((e,t)=>e.step-t.step),l=e.some(e=>null!=e.backbone_map_i2t||null!=e.backbone_map_t2i),n=e[e.length-1],i=!!n&&(null!=n.backbone_p1||null!=n.backbone_p5||null!=n.backbone_p10),o=n?[{name:"P@1",Hash:n.p1??0,Backbone:i?n.backbone_p1??0:void 0},{name:"P@5",Hash:n.p5??0,Backbone:i?n.backbone_p5??0:void 0},{name:"P@10",Hash:n.p10??0,Backbone:i?n.backbone_p10??0:void 0}]:[],c=o.some(e=>e.Hash>0||void 0!==e.Backbone&&e.Backbone>0);return(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 p-4 border border-gray-800 h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200",children:"Retrieval Metrics"}),(0,t.jsx)("div",{className:"flex gap-1",children:["map","precision"].map(e=>(0,t.jsx)("button",{onClick:()=>r(e),className:`text-xs px-2 py-0.5 rounded ${a===e?"bg-blue-900/50 text-blue-400":"text-gray-500 hover:text-gray-300"}`,children:"map"===e?"mAP":"P@k"},e))})]}),0===e.length?(0,t.jsx)("div",{className:"h-48 flex items-center justify-center text-gray-600 text-sm",children:"Waiting for evaluation data..."}):"map"===a?(0,t.jsx)(A.ResponsiveContainer,{width:"100%",height:200,children:(0,t.jsxs)(E,{data:s,children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,t.jsx)(C.XAxis,{dataKey:"step",tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151",label:{value:"Step",position:"insideBottom",offset:-2,fontSize:10,fill:"#6b7280"}}),(0,t.jsx)(X.YAxis,{domain:[0,1],tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151"}),(0,t.jsx)(P.Tooltip,{contentStyle:{backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"8px",fontSize:"11px"},labelFormatter:e=>{let t=s.find(t=>t.step===e);return t?`Epoch ${t.epoch}, Step ${e}`:`Step ${e}`},formatter:e=>"number"==typeof e?e.toFixed(4):"N/A"}),(0,t.jsx)(L.Legend,{wrapperStyle:{fontSize:"11px"}}),eX.map(e=>(0,t.jsx)(D.Line,{type:"monotone",dataKey:e,stroke:eO[e],dot:{r:3},activeDot:{r:6},strokeWidth:1.5,name:`Hash ${e}`,isAnimationActive:!1,connectNulls:!0},e)),l&&eX.map(e=>(0,t.jsx)(D.Line,{type:"monotone",dataKey:`Backbone ${e}`,stroke:eP[e],dot:{r:3},activeDot:{r:6},strokeWidth:1.5,strokeDasharray:"6 3",name:`Backbone ${e}`,isAnimationActive:!1,connectNulls:!0},`backbone-${e}`))]})}):c?(0,t.jsx)(A.ResponsiveContainer,{width:"100%",height:200,children:(0,t.jsxs)(eD.BarChart,{data:o,children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,t.jsx)(C.XAxis,{dataKey:"name",tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151"}),(0,t.jsx)(X.YAxis,{domain:[0,1],tick:{fontSize:10,fill:"#6b7280"},stroke:"#374151"}),(0,t.jsx)(P.Tooltip,{contentStyle:{backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"8px",fontSize:"11px"},formatter:e=>"number"==typeof e?e.toFixed(4):"N/A"}),i&&(0,t.jsx)(L.Legend,{wrapperStyle:{fontSize:"11px"}}),(0,t.jsx)(eC.Bar,{dataKey:"Hash",fill:"#3b82f6",radius:[4,4,0,0],name:"Hash"}),i&&(0,t.jsx)(eC.Bar,{dataKey:"Backbone",fill:"#60a5fa",radius:[4,4,0,0],name:"Backbone",fillOpacity:.6})]})}):(0,t.jsx)("div",{className:"h-48 flex items-center justify-center text-gray-600 text-sm",children:"Waiting for P@K data..."})]})}var eA=e.i(55153);function eF({data:e}){let a=e.filter(e=>null!==e.bit_entropy).map(e=>({step:e.step??e.epoch,epoch:e.epoch,entropy:e.bit_entropy})).sort((e,t)=>e.step-t.step),r=e.filter(e=>null!==e.quant_error).map(e=>({step:e.step??e.epoch,epoch:e.epoch,error:e.quant_error})).sort((e,t)=>e.step-t.step),s=a[a.length-1]?.entropy??null,l=r[r.length-1]?.error??null;return(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 p-4 border border-gray-800 h-full",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200 mb-3",children:"Hash Quality"}),0===e.length?(0,t.jsx)("div",{className:"h-48 flex items-center justify-center text-gray-600 text-sm",children:"Waiting for evaluation data..."}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-2.5",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Bit Entropy"}),(0,t.jsx)("p",{className:"text-lg font-mono text-gray-200",children:null!==s?s.toFixed(4):"—"}),(0,t.jsx)("p",{className:"text-[10px] text-gray-600",children:"ideal: 1.0"})]}),(0,t.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-2.5",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Quant Error"}),(0,t.jsx)("p",{className:"text-lg font-mono text-gray-200",children:null!==l?l.toFixed(4):"—"}),(0,t.jsx)("p",{className:"text-[10px] text-gray-600",children:"ideal: 0.0"})]})]}),a.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Bit Entropy per Step"}),(0,t.jsx)(A.ResponsiveContainer,{width:"100%",height:100,children:(0,t.jsxs)(E,{data:a,children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,t.jsx)(C.XAxis,{dataKey:"step",tick:{fontSize:9,fill:"#6b7280"},stroke:"#374151"}),(0,t.jsx)(X.YAxis,{domain:[0,1],tick:{fontSize:9,fill:"#6b7280"},stroke:"#374151"}),(0,t.jsx)(P.Tooltip,{contentStyle:{backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"8px",fontSize:"11px"},labelFormatter:e=>{let t=a.find(t=>t.step===e);return t?`Epoch ${t.epoch}, Step ${e}`:`Step ${e}`},formatter:e=>"number"==typeof e?e.toFixed(4):"N/A"}),(0,t.jsx)(eA.ReferenceLine,{y:1,stroke:"#10b981",strokeDasharray:"3 3",strokeOpacity:.5}),(0,t.jsx)(D.Line,{type:"monotone",dataKey:"entropy",stroke:"#10b981",dot:{r:2},strokeWidth:1.5,isAnimationActive:!1})]})})]}),r.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Quantization Error per Step"}),(0,t.jsx)(A.ResponsiveContainer,{width:"100%",height:100,children:(0,t.jsxs)(E,{data:r,children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#1f2937"}),(0,t.jsx)(C.XAxis,{dataKey:"step",tick:{fontSize:9,fill:"#6b7280"},stroke:"#374151"}),(0,t.jsx)(X.YAxis,{tick:{fontSize:9,fill:"#6b7280"},stroke:"#374151"}),(0,t.jsx)(P.Tooltip,{contentStyle:{backgroundColor:"#111827",border:"1px solid #374151",borderRadius:"8px",fontSize:"11px"},labelFormatter:e=>{let t=r.find(t=>t.step===e);return t?`Epoch ${t.epoch}, Step ${e}`:`Step ${e}`},formatter:e=>"number"==typeof e?e.toFixed(4):"N/A"}),(0,t.jsx)(eA.ReferenceLine,{y:0,stroke:"#10b981",strokeDasharray:"3 3",strokeOpacity:.5}),(0,t.jsx)(D.Line,{type:"monotone",dataKey:"error",stroke:"#f59e0b",dot:{r:2},strokeWidth:1.5,isAnimationActive:!1})]})})]})]})]})}var ez=e.i(40160);let eI=(0,r.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),e$=(0,r.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var eB=e.i(70273);function eW(){let{selectedRunId:e,checkpointsByRun:r,runCheckpoints:s,selectedCheckpointId:l,selectCheckpoint:n,loadCheckpointForInference:i}=(0,x.useRunContext)(),o=e?r[e]??[]:[],c=s.length>0,d=(0,S.useMemo)(()=>{let e=(c?s.map(e=>({val_loss:e.val_loss,path:e.path})):o.map(e=>({val_loss:e.val_loss,path:e.path}))).filter(e=>null!=e.val_loss);return 0===e.length?null:e.reduce((e,t)=>(e.val_loss??1/0)<(t.val_loss??1/0)?e:t).path},[c,s,o]);return(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(ez.Download,{className:"w-3.5 h-3.5 text-gray-500"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Checkpoints"})]}),(c||o.length>0)&&(0,t.jsxs)(a.default,{href:`/inference${e?`?run=${e}`:""}`,className:"flex items-center gap-1 text-[10px] text-blue-400 hover:text-blue-300 transition-colors",children:[(0,t.jsx)("span",{children:"Open Explorer"}),(0,t.jsx)(eI,{className:"w-2.5 h-2.5"})]})]}),c||0!==o.length?c?(0,t.jsx)("div",{className:"space-y-1 max-h-[200px] overflow-y-auto",children:s.map(e=>{let a=e.path===d,r=e.id===l;return(0,t.jsx)("div",{className:`rounded-lg px-2.5 py-1.5 text-xs transition-colors cursor-pointer ${r?"bg-blue-900/30 border border-blue-700/50":a?"bg-yellow-900/20 border border-yellow-800/40 hover:bg-yellow-900/30":"bg-gray-800/50 hover:bg-gray-800 border border-transparent"}`,onClick:()=>n(e.id),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 min-w-0",children:[a&&(0,t.jsx)(eB.Star,{className:"w-3 h-3 text-yellow-500 shrink-0 fill-yellow-500"}),(0,t.jsxs)("span",{className:`truncate ${r?"text-blue-300":"text-gray-300"}`,children:["Epoch ",e.epoch,null!=e.step?` (step ${e.step})`:""]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[null!=e.val_loss&&(0,t.jsxs)("span",{className:"text-[10px] text-gray-500",children:["loss ",e.val_loss.toFixed(4)]}),(0,t.jsxs)("span",{className:"text-[10px] text-gray-500",children:[e.size_mb?.toFixed(0)??"?","MB"]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e.path)},className:"flex items-center gap-0.5 px-1.5 py-0.5 rounded bg-green-700/50 text-green-300 hover:bg-green-700 text-[10px] transition-colors",children:(0,t.jsx)(e$,{className:"w-2 h-2"})})]})]})},e.id)})}):(0,t.jsx)("div",{className:"space-y-1 max-h-[200px] overflow-y-auto",children:o.map(e=>{let r=e.path===d;return(0,t.jsx)(a.default,{href:`/inference?load=${encodeURIComponent(e.path)}`,className:`block rounded-lg px-2.5 py-1.5 text-xs transition-colors ${r?"bg-yellow-900/20 border border-yellow-800/40 hover:bg-yellow-900/30":"bg-gray-800/50 hover:bg-gray-800"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 min-w-0",children:[r&&(0,t.jsx)(eB.Star,{className:"w-3 h-3 text-yellow-500 shrink-0 fill-yellow-500"}),(0,t.jsx)("span",{className:"text-gray-300 truncate",children:null!=e.epoch?`Epoch ${e.epoch}`:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0 text-[10px] text-gray-500",children:[null!=e.val_loss&&(0,t.jsxs)("span",{children:["loss ",e.val_loss.toFixed(4)]}),(0,t.jsxs)("span",{children:[e.size_mb.toFixed(0),"MB"]})]})]})},e.path)})}):(0,t.jsx)("p",{className:"text-xs text-gray-600 py-2",children:e?"No checkpoints for this run":"Select a run to view checkpoints"})]})}let eK=(0,r.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),eR=(0,r.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function eH(){let{selectedRunId:e,epochSummaries:a,selectedEvalEpoch:r,selectEvalEpoch:s,selectedCheckpointId:l,selectCheckpoint:n,loadCheckpointForInference:i}=(0,x.useRunContext)(),o=(0,S.useMemo)(()=>{let e=a.filter(e=>e.checkpoint?.val_loss!=null);return 0===e.length?null:e.reduce((e,t)=>(e.checkpoint?.val_loss??1/0)<(t.checkpoint?.val_loss??1/0)?e:t)},[a]);return e?0===a.length?(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,t.jsx)(eR,{className:"w-3.5 h-3.5 text-gray-500"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Epochs"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 py-2",children:"No epochs recorded yet"})]}):(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(eR,{className:"w-3.5 h-3.5 text-gray-500"}),(0,t.jsxs)("span",{className:"text-xs font-medium text-gray-400",children:["Epochs (",a.length,")"]})]}),o&&(0,t.jsxs)("span",{className:"text-[10px] text-yellow-500",children:["Best: Epoch ",o.epoch]})]}),(0,t.jsx)("div",{className:"space-y-1 max-h-[250px] overflow-y-auto",children:a.map(e=>{let a=r===e.epoch,c=!!e.checkpoint,d=o?.epoch===e.epoch,h=e.checkpoint?.id===l;return(0,t.jsxs)("div",{className:`rounded-lg px-2.5 py-2 text-xs transition-colors cursor-pointer ${a?"bg-blue-900/30 border border-blue-800/50":d?"bg-yellow-900/20 border border-yellow-800/30 hover:bg-yellow-900/30":"bg-gray-800/50 hover:bg-gray-800 border border-transparent"}`,onClick:()=>s(e.epoch),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[c?(0,t.jsx)(eK,{className:`w-3 h-3 ${d?"text-yellow-500":"text-green-500"}`}):(0,t.jsx)(eR,{className:"w-3 h-3 text-gray-600"}),(0,t.jsxs)("span",{className:`font-medium ${a?"text-blue-300":"text-gray-300"}`,children:["Epoch ",e.epoch]})]}),(0,t.jsxs)("span",{className:"text-[10px] text-gray-500",children:["Steps ",e.start_step,"-",e.end_step]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 ml-4",children:[e.eval?.val_loss_total!=null&&(0,t.jsxs)("span",{children:["Loss: ",e.eval.val_loss_total.toFixed(4)]}),e.eval?.map_i2t!=null&&(0,t.jsxs)("span",{children:["mAP: ",(100*e.eval.map_i2t).toFixed(1),"%"]})]}),c&&e.checkpoint&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1.5 ml-4",children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e.checkpoint.id)},className:`flex items-center gap-1 px-2 py-0.5 rounded text-[10px] transition-colors ${h?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[(0,t.jsx)(ez.Download,{className:"w-2.5 h-2.5"}),(0,t.jsxs)("span",{children:[e.checkpoint.size_mb?.toFixed(0)??"?","MB"]})]}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),i(e.checkpoint.path)},className:"flex items-center gap-1 px-2 py-0.5 rounded bg-green-700/50 text-green-300 hover:bg-green-700 text-[10px] transition-colors",children:[(0,t.jsx)(e$,{className:"w-2.5 h-2.5"}),(0,t.jsx)("span",{children:"Load"})]})]})]},e.epoch)})})]}):(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,t.jsx)(eR,{className:"w-3.5 h-3.5 text-gray-500"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Epochs"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 py-2",children:"Select a run to view epochs"})]})}function eq(){let e,{selectedRunId:r}=(0,x.useRunContext)(),{isConnected:m,systemData:u,trainingData:g,evalData:y,status:f}=(0,h.useWebSocket)((e="https:"===window.location.protocol?"wss:":"ws:",`${e}//${window.location.host}/ws`),r),b=g[g.length-1];return(0,t.jsxs)("div",{className:"min-h-screen p-4 max-w-[1400px] mx-auto space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-gray-200",children:"VLM Quantization Monitor"}),(0,t.jsx)(p.default,{})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(a.default,{href:"/hash-analysis",className:"flex items-center gap-1.5 text-xs text-gray-400 hover:text-purple-400 transition-colors",children:[(0,t.jsx)(s,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Hash Analysis"})]}),(0,t.jsxs)(a.default,{href:"/augmentation",className:"flex items-center gap-1.5 text-xs text-gray-400 hover:text-cyan-400 transition-colors",children:[(0,t.jsx)(i.Layers,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Augmentation"})]}),(0,t.jsxs)(a.default,{href:"/inference",className:"flex items-center gap-1.5 text-xs text-gray-400 hover:text-blue-400 transition-colors",children:[(0,t.jsx)(o.Search,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Hash Explorer"})]}),(0,t.jsxs)(a.default,{href:"/search",className:"flex items-center gap-1.5 text-xs text-gray-400 hover:text-emerald-400 transition-colors",children:[(0,t.jsx)(l.Database,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Search"})]}),(0,t.jsxs)(a.default,{href:"/optuna",className:"flex items-center gap-1.5 text-xs text-gray-400 hover:text-amber-400 transition-colors",children:[(0,t.jsx)(n.FlaskConical,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Optuna"})]}),m?(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-emerald-400 text-xs",children:[(0,t.jsx)(c.Wifi,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Connected"})]}):(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-red-400 text-xs",children:[(0,t.jsx)(d.WifiOff,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Disconnected"})]})]})]}),(0,t.jsx)(v,{status:f,latestMetric:b}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] lg:items-start gap-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{data:u}),(0,t.jsx)(eH,{}),(0,t.jsx)(eW,{})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(eE,{data:g,evalData:y}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(eL,{data:y}),(0,t.jsx)(eF,{data:y})]})]})]})]})}e.s(["default",()=>eq],31713)}]);