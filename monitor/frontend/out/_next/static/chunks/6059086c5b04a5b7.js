(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70869,e=>{"use strict";var t=e.i(43476),r=e.i(42696);function a(){let{runs:e,selectedRunId:a,selectRun:s,evalPoints:n,selectedEvalEpoch:l,selectEvalEpoch:i,checkpointsByRun:o}=(0,r.useRunContext)();return 0===e.length?null:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("select",{value:a??"",onChange:e=>s(e.target.value||null),className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs rounded px-2 py-1 focus:outline-none focus:border-blue-500",children:e.map(e=>{var r;let a,s=o[e.run_id]?.length??0;return(0,t.jsxs)("option",{value:e.run_id,children:[(a=(r=e.run_id).match(/^(\d{4})(\d{2})(\d{2})_(\d{2})(\d{2})(\d{2})$/))?new Date(Date.UTC(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3]),parseInt(a[4]),parseInt(a[5]),parseInt(a[6]))).toLocaleString("ko-KR",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Seoul"}):r," — ",e.num_eval_points," evals",s>0?`, ${s} ckpts`:""]},e.run_id)})}),n.length>0&&(0,t.jsx)("select",{value:n.find(e=>e.epoch===l)?.step??"",onChange:e=>{let t=Number(e.target.value),r=n.find(e=>(e.step??e.epoch)===t);r&&i(r.epoch)},className:"bg-gray-800 border border-gray-700 text-gray-300 text-xs rounded px-2 py-1 focus:outline-none focus:border-blue-500",children:n.map(e=>(0,t.jsxs)("option",{value:e.step??e.epoch,children:["Epoch ",e.epoch,", Step ",e.step??0]},`${e.epoch}-${e.step}`))})]})}e.s(["default",()=>a])},33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:i="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:l?24*Number(n)/Number(a):n,className:r("lucide",i),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),l=(e,s)=>{let l=(0,t.forwardRef)(({className:l,...i},o)=>(0,t.createElement)(n,{ref:o,iconNode:s,className:r(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...i}));return l.displayName=a(e),l};e.s(["default",()=>l],75254)},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return o},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return i}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});function n(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,l(e));else t.set(r,l(a));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return i},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(90809)._(e.r(98183)),l=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,a=e.protocol||"",s=e.pathname||"",i=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(n.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||l.test(a))&&!1!==c?(c="//"+(c||""),s&&"/"!==s[0]&&(s="/"+s)):c||(c=""),i&&"#"!==i[0]&&(i="#"+i),d&&"?"!==d[0]&&(d="?"+d),s=s.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${s}${d}${i}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return i(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=e.r(71645);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=n(e,a)),t&&(s.current=n(t,a))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return j},NormalizeError:function(){return y},PageNotFoundError:function(){return b},SP:function(){return f},ST:function(){return m},WEB_VITALS:function(){return n},execOnce:function(){return l},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return p},loadGetInitialProps:function(){return x},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return N}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function x(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await x(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&p(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let f="u">typeof performance,m=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class y extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let a=e.r(18967),s=e.r(52817);function n(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return g},useLinkStatus:function(){return b}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let n=e.r(90809),l=e.r(43476),i=n._(e.r(71645)),o=e.r(95057),c=e.r(8372),d=e.r(18581),u=e.r(18967),p=e.r(5550);e.r(33525);let h=e.r(91949),x=e.r(73668),f=e.r(9396);function m(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function g(t){var r;let a,s,n,[o,g]=(0,i.useOptimistic)(h.IDLE_LINK_STATUS),b=(0,i.useRef)(null),{href:j,as:v,children:N,prefetch:w=null,passHref:k,replace:S,shallow:_,scroll:C,onClick:P,onMouseEnter:E,onTouchStart:O,legacyBehavior:M=!1,onNavigate:L,ref:T,unstable_dynamicOnHover:$,...R}=t;a=N,M&&("string"==typeof a||"number"==typeof a)&&(a=(0,l.jsx)("a",{children:a}));let A=i.default.useContext(c.AppRouterContext),I=!1!==w,U=!1!==w?null===(r=w)||"auto"===r?f.FetchStrategy.PPR:f.FetchStrategy.Full:f.FetchStrategy.PPR,{href:F,as:D}=i.default.useMemo(()=>{let e=m(j);return{href:e,as:v?m(v):e}},[j,v]);if(M){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=i.default.Children.only(a)}let z=M?s&&"object"==typeof s&&s.ref:T,B=i.default.useCallback(e=>(null!==A&&(b.current=(0,h.mountLinkInstance)(e,F,A,U,I,g)),()=>{b.current&&((0,h.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,h.unmountPrefetchableInstance)(e)}),[I,F,A,U,g]),q={ref:(0,d.useMergedRef)(B,z),onClick(t){M||"function"!=typeof P||P(t),M&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!A||t.defaultPrevented||function(t,r,a,s,n,l,o){if("u">typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,x.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);i.default.startTransition(()=>{u(a||r,n?"replace":"push",l??!0,s.current)})}}(t,F,D,b,S,C,L)},onMouseEnter(e){M||"function"!=typeof E||E(e),M&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),A&&I&&(0,h.onNavigationIntent)(e.currentTarget,!0===$)},onTouchStart:function(e){M||"function"!=typeof O||O(e),M&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),A&&I&&(0,h.onNavigationIntent)(e.currentTarget,!0===$)}};return(0,u.isAbsoluteUrl)(D)?q.href=D:M&&!k&&("a"!==s.type||"href"in s.props)||(q.href=(0,p.addBasePath)(D)),n=M?i.default.cloneElement(s,q):(0,l.jsx)("a",{...R,...q,children:a}),(0,l.jsx)(y.Provider,{value:o,children:n})}e.r(84508);let y=(0,i.createContext)(h.IDLE_LINK_STATUS),b=()=>(0,i.useContext)(y);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},58041,55436,39312,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",()=>r],58041);let a=(0,t.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>a],55436);let s=(0,t.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>s],39312)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},48256,35501,71649,69074,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>r],48256);let a=(0,t.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["ImageIcon",()=>a],35501);let s=(0,t.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);e.s(["Type",()=>s],71649);let n=(0,t.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>n],69074)},22956,e=>{"use strict";var t=e.i(43476),r=e.i(71689),a=e.i(75254);let s=(0,a.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var n=e.i(58041),l=e.i(48256),i=e.i(35501),o=e.i(31278),c=e.i(55436);let d=(0,a.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var u=e.i(71649),p=e.i(69074),h=e.i(39312),x=e.i(22016),f=e.i(71645),m=e.i(70869);function g(){let[e,a]=(0,f.useState)([]),[g,y]=(0,f.useState)([]),[b,j]=(0,f.useState)(!0),[v,N]=(0,f.useState)(""),[w,k]=(0,f.useState)(""),[S,_]=(0,f.useState)(!1),[C,P]=(0,f.useState)(null),[E,O]=(0,f.useState)(null),[M,L]=(0,f.useState)(!1),[T,$]=(0,f.useState)(!1),[R,A]=(0,f.useState)("text"),[I,U]=(0,f.useState)("backbone"),[F,D]=(0,f.useState)(""),[z,B]=(0,f.useState)(""),[q,K]=(0,f.useState)(null),[H,W]=(0,f.useState)(64),[Z,V]=(0,f.useState)(20),[J,Q]=(0,f.useState)(!1),[G,X]=(0,f.useState)(null),[Y,ee]=(0,f.useState)(""),[et,er]=(0,f.useState)(""),[ea,es]=(0,f.useState)(null),en=(0,f.useRef)(null),el=E?.loaded&&M;(0,f.useEffect)(()=>{j(!0),Promise.all([fetch("/api/search/list-indices").then(e=>e.json()).then(e=>a(e.indices||[])).catch(()=>a([])),fetch("/api/inference/checkpoints").then(e=>e.json()).then(e=>y(e.checkpoints||[])).catch(()=>y([])),fetch("/api/search/status").then(e=>e.json()).then(e=>{e.loaded&&(O(e),e.bit_list?.length>0&&W(e.bit_list[e.bit_list.length-1]))}).catch(()=>{}),fetch("/api/inference/status").then(e=>e.json()).then(e=>{L(e.loaded??!1),$(e.backbone_only??!1)}).catch(()=>{})]).finally(()=>j(!1))},[]);let ei=(0,f.useMemo)(()=>{let e={};return g.forEach(t=>{e[t.run_dir]||(e[t.run_dir]=[]),e[t.run_dir].push(t)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>e.epoch!==t.epoch?(t.epoch??0)-(e.epoch??0):(t.step??0)-(e.step??0))}),e},[g]);(0,f.useEffect)(()=>{if(!v)return;let t=g.find(e=>e.path===v);if(!t)return;let r=e.find(e=>e.run_dir===t.run_dir);r&&w!==r.path&&k(r.path)},[v,g,e,w]);let eo=async()=>{if(v&&w){_(!0),P(null);try{let e=await fetch("/api/search/auto-setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkpoint_path:v,index_path:w})}),t=await e.json();t.errors?.length?P(t.errors.join("; ")):(t.model&&(L(t.model.loaded??!1),$(t.model.backbone_only??!1)),t.index&&(O(t.index),t.index.bit_list?.length>0&&W(t.index.bit_list[t.index.bit_list.length-1])))}catch(e){P(e instanceof Error?e.message:"Setup failed")}finally{_(!1)}}},ec=(0,f.useCallback)(e=>{if(!e.type.startsWith("image/"))return;let t=new FileReader;t.onload=e=>{K(e.target?.result),es(null)},t.readAsDataURL(e)},[]),ed=(0,f.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&ec(t)},[ec]),eu=async()=>{Q(!0),es(null),X(null);try{let e={mode:I,bit:H,top_k:Z};if("upload"===R&&q)e.image_base64=q;else if("url"===R&&z.trim())e.image_url=z.trim();else if("text"===R&&F.trim())e.text=F.trim();else{es("Please provide an input"),Q(!1);return}let t=await fetch("/api/search/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();r.error?es(r.error):(X(r.results),ee(r.query_type),er(r.mode))}catch(e){es(e instanceof Error?e.message:"Search failed")}finally{Q(!1)}},ep=[{key:"upload",icon:p.Upload,label:"Upload"},{key:"url",icon:l.Globe,label:"URL"},{key:"text",icon:u.Type,label:"Text"}],eh=el&&("upload"===R&&q||"url"===R&&z.trim()||"text"===R&&F.trim());return(0,t.jsx)("div",{className:"min-h-screen bg-gray-950 text-gray-100 p-4 md:p-6",children:(0,t.jsxs)("div",{className:"max-w-[1400px] mx-auto space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(x.default,{href:"/",className:"text-gray-500 hover:text-gray-300 transition-colors",children:(0,t.jsx)(r.ArrowLeft,{className:"w-4 h-4"})}),(0,t.jsx)("h1",{className:"text-lg font-bold text-gray-200",children:"VLM Hash Search"}),(0,t.jsx)(m.default,{})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(x.default,{href:"/inference",className:"flex items-center gap-1.5 text-xs text-gray-400 hover:text-blue-400 transition-colors",children:[(0,t.jsx)(c.Search,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{children:"Hash Explorer"})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[400px_1fr] gap-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[!el&&(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d,{className:"w-4 h-4 text-purple-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Setup Search"})]}),b?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(o.Loader2,{className:"w-5 h-5 animate-spin text-gray-600"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Step 1: Select Model"}),M&&(0,t.jsx)(s,{className:"w-3.5 h-3.5 text-emerald-400"})]}),M?(0,t.jsxs)("div",{className:"bg-gray-800/50 border border-emerald-500/30 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),(0,t.jsx)("span",{className:"text-xs text-emerald-400",children:"Model Loaded"})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 mt-1",children:T?"Backbone Only":"Hash Model"})]}):(0,t.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-xs text-gray-200 focus:outline-none focus:border-gray-500",children:[(0,t.jsx)("option",{value:"",children:"Choose a checkpoint..."}),Object.entries(ei).map(([e,r])=>(0,t.jsx)("optgroup",{label:e.split("/").pop()||e,children:r.map(e=>{let r=`${e.name} • epoch ${e.epoch??"?"} step ${e.step??"?"} • mAP ${((e.map_i2t??0)*100).toFixed(1)}%`;return(0,t.jsx)("option",{value:e.path,children:r},e.path)})},e))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Step 2: Select Index"}),E?.loaded&&(0,t.jsx)(s,{className:"w-3.5 h-3.5 text-emerald-400"})]}),E?.loaded?(0,t.jsxs)("div",{className:"bg-gray-800/50 border border-emerald-500/30 rounded-lg p-3 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),(0,t.jsx)("span",{className:"text-xs text-emerald-400",children:"Index Loaded"})]}),(0,t.jsxs)("div",{className:"text-[10px] text-gray-500 space-y-0.5",children:[(0,t.jsxs)("p",{children:[E.num_items.toLocaleString()," items"]}),(0,t.jsxs)("p",{children:["bits: [",E.bit_list.join(", "),"]"]}),(0,t.jsx)("p",{className:"truncate",title:E.index_path,children:E.index_path.split("/").pop()})]})]}):(0,t.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-xs text-gray-200 focus:outline-none focus:border-gray-500",children:[(0,t.jsx)("option",{value:"",children:"Choose a search index..."}),e.map(e=>{let r=`${e.name} • ${e.size_mb.toFixed(1)} MB • ${e.run_dir.split("/").pop()}`;return(0,t.jsx)("option",{value:e.path,children:r},e.path)})]})]}),!el&&(0,t.jsx)("button",{onClick:eo,disabled:S||!v||!w,className:"w-full py-2.5 rounded-lg text-xs font-medium bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white transition-colors flex items-center justify-center gap-2",children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"w-3.5 h-3.5 animate-spin"}),"Setting up..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Zap,{className:"w-3.5 h-3.5"}),"Load & Setup"]})}),C&&(0,t.jsx)("p",{className:"text-xs text-red-400",children:C})]})]}),el&&(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Database,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"System Ready"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Model"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),(0,t.jsx)("span",{className:"text-gray-400",children:T?"Backbone":"Hash"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Index"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),(0,t.jsxs)("span",{className:"text-gray-400",children:[E?.num_items.toLocaleString()," items"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Bit levels"}),(0,t.jsxs)("span",{className:"text-gray-400 font-mono",children:["[",E?.bit_list.join(", "),"]"]})]})]})]}),el&&(0,t.jsxs)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-4 space-y-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Query"}),(0,t.jsx)("div",{className:"flex gap-0.5 bg-gray-800 rounded-lg p-0.5",children:ep.map(e=>{let r=e.icon;return(0,t.jsxs)("button",{onClick:()=>{A(e.key),es(null)},className:`flex-1 flex items-center justify-center gap-1 text-[11px] px-2 py-1.5 rounded-md transition-colors ${R===e.key?"bg-blue-600 text-white":"text-gray-500 hover:text-gray-300"}`,children:[(0,t.jsx)(r,{className:"w-3 h-3"}),e.label]},e.key)})}),"upload"===R&&(0,t.jsxs)("div",{onDrop:ed,onDragOver:e=>e.preventDefault(),onClick:()=>en.current?.click(),className:"border-2 border-dashed border-gray-700 rounded-lg p-3 cursor-pointer hover:border-gray-500 transition-colors min-h-[100px] flex flex-col items-center justify-center gap-1.5",children:[q?(0,t.jsx)("img",{src:q,alt:"Preview",className:"max-h-[80px] rounded object-contain"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.ImageIcon,{className:"w-6 h-6 text-gray-600"}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500",children:"Drop or click"})]}),(0,t.jsx)("input",{ref:en,type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&ec(t)}})]}),"url"===R&&(0,t.jsx)("input",{value:z,onChange:e=>B(e.target.value),placeholder:"https://example.com/image.jpg",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-xs text-gray-200 placeholder-gray-600 focus:outline-none focus:border-gray-500"}),"text"===R&&(0,t.jsx)("textarea",{value:F,onChange:e=>D(e.target.value),placeholder:"Describe what you're looking for...",rows:3,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-xs text-gray-200 placeholder-gray-600 resize-none focus:outline-none focus:border-gray-500"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-wider text-gray-500",children:"Search Mode"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>U("backbone"),className:`flex-1 py-1.5 rounded-lg text-xs font-medium transition-colors ${"backbone"===I?"bg-blue-600 text-white":"bg-gray-800 text-gray-500 hover:text-gray-300"}`,children:"Backbone (Cosine)"}),(0,t.jsx)("button",{onClick:()=>U("hash"),disabled:T,className:`flex-1 py-1.5 rounded-lg text-xs font-medium transition-colors ${"hash"===I?"bg-purple-600 text-white":"bg-gray-800 text-gray-500 hover:text-gray-300"} disabled:opacity-30 disabled:cursor-not-allowed`,children:"Hash (Hamming)"})]})]}),"hash"===I&&E?.bit_list&&(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-wider text-gray-500",children:"Bit Level"}),(0,t.jsx)("div",{className:"flex gap-1.5",children:E.bit_list.map(e=>(0,t.jsx)("button",{onClick:()=>W(e),className:`flex-1 py-1 rounded text-[11px] font-mono transition-colors ${H===e?"bg-purple-600 text-white":"bg-gray-800 text-gray-500 hover:text-gray-300"}`,children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-wider text-gray-500",children:"Top-K"}),(0,t.jsx)("span",{className:"text-[10px] text-gray-400 font-mono",children:Z})]}),(0,t.jsx)("input",{type:"range",min:5,max:50,step:5,value:Z,onChange:e=>V(Number(e.target.value)),className:"w-full accent-blue-500"})]}),(0,t.jsx)("button",{onClick:eu,disabled:!eh||J,className:"w-full py-2.5 rounded-lg text-xs font-medium bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 disabled:text-gray-500 text-white transition-colors flex items-center justify-center gap-2",children:J?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"w-3.5 h-3.5 animate-spin"}),"Searching..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Search,{className:"w-3.5 h-3.5"}),"Search"]})}),ea&&(0,t.jsx)("p",{className:"text-xs text-red-400",children:ea})]})]}),(0,t.jsx)("div",{className:"rounded-xl bg-gray-900 border border-gray-800 p-4 min-h-[400px]",children:G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-200",children:"Results"}),(0,t.jsxs)("span",{className:"text-[10px] text-gray-500",children:[Y," query | ",et," mode |"," ",G.length," results"]})]}),0===G.length?(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center py-8",children:"No results found."}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-3",children:G.map(e=>(0,t.jsxs)("div",{className:"rounded-lg bg-gray-800/50 border border-gray-700/50 overflow-hidden hover:border-gray-600 transition-colors",children:[e.thumbnail?(0,t.jsx)("img",{src:`data:image/jpeg;base64,${e.thumbnail}`,alt:e.caption,className:"w-full aspect-square object-cover bg-gray-800"}):(0,t.jsx)("div",{className:"w-full aspect-square bg-gray-800 flex items-center justify-center",children:(0,t.jsx)(i.ImageIcon,{className:"w-6 h-6 text-gray-700"})}),(0,t.jsxs)("div",{className:"p-2 space-y-1",children:[(0,t.jsx)("p",{className:"text-[10px] text-gray-400 line-clamp-2 leading-relaxed",children:e.caption}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-[10px] text-gray-600",children:["#",e.rank]}),(0,t.jsxs)("span",{className:`text-[11px] font-mono font-medium ${e.score>.8?"text-emerald-400":e.score>.6?"text-yellow-400":"text-red-400"}`,children:[(100*e.score).toFixed(1),"%"]})]}),null!=e.distance&&(0,t.jsxs)("span",{className:"text-[10px] text-gray-600",children:["hamming: ",e.distance]})]})]},`${e.image_id}-${e.rank}`))})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[300px] gap-3",children:[(0,t.jsx)(c.Search,{className:"w-8 h-8 text-gray-700"}),(0,t.jsx)("p",{className:"text-xs text-gray-600 text-center max-w-[280px]",children:el||b||0!==g.length?el||b||0!==e.length?el?"Enter a query and click Search":"Set up model and index to start searching":"No search indices found. Build an index first.":"No checkpoints found. Train a model first."})]})})]})]})})}e.s(["default",()=>g],22956)}]);